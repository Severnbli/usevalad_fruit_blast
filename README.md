# Usevalad Fruit Blast

A small but polished 3D/2.5D arcade made with Unity where fruits explode, bounce, and shower XP. The project demonstrates a modular feature-based architecture, custom lightweight physics, a lifecycle state machine, perk and difficulty systems, and a clean UI experience. It is intended as a readable reference and a fun prototype you can extend.

**This file generated by AI!**

## Highlights
- **Core loop**: spawn falling fruits, tap/click to destroy, collect XP, survive until health runs out.
- **Lifecycle state machine**: bootstrap → start → core gameplay → end/defeat → reset.
- **Feature container (IOC-lite)**: systems are registered/configured centrally and composed at runtime.
- **Custom physics helpers**: gravity/explosions, simple colliders, camera field bounds.
- **Gyroscope support**: optional gravity tilt using the device gyro.
- **Input abstraction**: mouse, touch pointers, and enable/disable user input per state.
- **UI system**: health/XP/level bars, popups, perk selection, pause and defeat screens.
- **Perks system**: discoverable perks with occurrence/trigger chances and levels.
- **Experience/Leveling**: gain XP, visual effects, progression feedback.
- **Difficulty scaling**: runtime adjustments to keep sessions engaging.
- **Effects**: split-sprite and explosion visuals, DOTween animations.


## Tech Stack
- **Unity**: 2022.3.45f1
- **Packages/Libraries**:
  - Cysharp **UniTask** for async game flow
  - **DOTween** for tweened UI/FX
  - **TextMeshPro** for crisp UI text
  - **Odin Inspector** (editor-time tooling)


## Project Structure (selected)
- `Usevalad Fruit Blast/Assets/_Project/Scripts`
  - `Bootstrap/`
    - `SystemCoordinator.cs`: feature registration and configuration
    - `SystemConfig.cs`: central config for features
  - `Features/Lifecycle/`
    - `LifecycleStateMachine/` with states: `BootstrapState`, `StartGameState`, `CoreGameState`, `EndGameState`, `DefeatDialogState`, `ResetGameState`
    - `Spawners/PhysicsObjectSpawner/FieldCatcherSpawner/`: continuous spawn loop
  - `Features/Physics/`
    - `GravityForceProvider`, `ExplosionForceProvider`, simple colliders (`CircleCollider`, `RectangleCollider`)
    - `CameraFieldProvider`, `ColliderFieldCatcher`
  - `Features/Input/`
    - `TouchProvider`, `MouseProvider`, `GyroscopeProvider`
    - `GyroscopeGravityChanger`
  - `Features/Stats/`
    - `HealthProvider`, `ExperienceProvider`
  - `Features/Bonuses/Perks/`
    - `BasePerk`, `PerksProvider`, perk UI (`PerkSelectionScreen/Popup`)
  - `Features/Difficulty/`
    - `DifficultyScaler`
  - `Common/UI/`
    - Bars: `HealthBar`, `ProgressBar`, `LevelBar`
    - Popups: `TextPopup`, `ScreenPopupSwitcher`, `PerkSelectionPopup`
  - `Features/Effects/`
    - `SplitSpriteEffectProvider`, `ExplosionEffectProvider`, `EffectObjectsContainer`
- `Usevalad Fruit Blast/Assets/_Project/Configs`: editable ScriptableObjects for features
- `Usevalad Fruit Blast/Assets/_Project/Prefabs`: UI, effects, and gameplay prefabs
- `Usevalad Fruit Blast/Assets/_Project/Media`: sprites, materials, audio, etc.


## Gameplay Overview
- **Goal**: score XP by destroying fruits; avoid losing all health.
- **Loop**:
  1) Fruits spawn within the camera field and fall under gravity.
  2) Tap/click fruits to destroy them; explosions and split effects play.
  3) Pickup XP and level up; occasionally select perks.
  4) Difficulty ramps over time; session ends when health reaches minimum.


## Controls
- **Desktop**: left-click to destroy fruits.
- **Mobile**: tap to destroy fruits.
- **Gyroscope (mobile)**: tilt to change gravity direction if enabled.


## Setup
1. Install Unity Editor **2022.3.45f1**.
2. Clone or download this repository.
3. Open the project in Unity via the root folder `Usevalad Fruit Blast`.
4. Open the main scene in `Assets/_Project/Scenes`.
5. Press Play.


## Configuration
Most systems expose ScriptableObject configs under `Assets/_Project/Configs`. Typical adjustments:
- **Spawning**: spawn rates, bounds, object pools
- **Physics**: gravity strength, explosion forces, colliders
- **Difficulty**: scaling curves/thresholds
- **Perks**: discovery level, occurrence/trigger chances, cooldowns
- **UI**: bar thresholds, colors, FX timings

To tweak, select the relevant asset and edit values in the Inspector. Runtime wiring is performed by `SystemCoordinator` using `SystemConfig`.


## Architecture Notes
- **Feature pattern**: each subsystem inherits from a base feature class and can implement interfaces such as configurable and updatable. Features are added to a central `Context` and can be retrieved by type.
- **State machine**: `LifecycleStateMachine` drives app flow; states enable/disable input, manage spawners, and switch on conditions (e.g., health threshold).
- **Async flow**: long-running loops (spawning, state guards) use UniTask with cancellation tokens linked to lifecycle and context lifetimes.
- **Input gating**: user input can be toggled per state to avoid race conditions.
- **Effects**: FX providers centralize spawning of visuals (explosions, split sprites) and coordinate with DOTween for timings.


## How to Build
- **Android**:
  - Open `File → Build Settings…`, switch to Android
  - Ensure scenes are added in order (from `EditorBuildSettings` if needed)
  - Press Build; an example APK exists in `Builds/FruitBlast.apk`
- **Desktop**:
  - Switch target to your platform (Windows/macOS/Linux) and Build


## Extending the Game
- Add a new perk: create a class extending `BasePerk`, register it in the `PerksProvider`, and add UI/icon assets.
- Create a new effect: implement a provider under `Features/Effects` and reference it from `SystemCoordinator` configs.
- Tune difficulty: adjust curves in `DifficultyScaler` config to change pacing.
- Add content: new fruit prefabs, sprites, and associated spawn rules.


## Known Demonstrated Systems
- Lifecycle state orchestration with safe cancellation
- Perk discovery/selection and conditional triggering
- Difficulty ramping by configuration
- XP/Level flow with UI bars and popups
- Abstracted mouse/touch/gyro input and input gating
- Lightweight physics helpers (gravity/explosion/colliders)
- Camera-bounded spawning and field catching


## Dependencies and Credits
- Cysharp `UniTask`
- Demigiant `DOTween`
- TextMesh Pro
- Sirenix `Odin Inspector`


## License
See `LICENSE`. 
